/*
void processBluetoothCommand(char *command) {
    logDebugMessage("PROCESS COMMAND: ");
    logDebugMessage(command);
    logDebugMessage("\n");


    } else if (command[0] == 'W') {
        // Set a new waypoint
        // Expected format is: "W34197644,-120035801"
        logDebugMessage("SET WAYPOINT: ");

        char *firstVal = strtok(&(command[1]), ",");
        char *secondVal = strtok(NULL, ",");
        if (secondVal == NULL) {
            logDebugMessage("MALFORMED WAYPOINT");
        } else {
            long newLatitude = atol(firstVal);
            long newLongitude = atol(secondVal);

            logDebugMessage(newLatitude,2);
            logDebugMessage(",");
            logDebugMessage(newLongitude,2);
            logDebugMessage("\n");
            navigation->setWaypoint(newLatitude, newLongitude, &globalStatus);
        }

    } else if (command[0] == 'C') {

        logDebugMessage("CURRENT COURSE DETAILS\n");
        logDebugMessage(globalStatus.latitude);
        logDebugMessage(",");
        logDebugMessage(globalStatus.longitude);
        logDebugMessage("\nCURRENT COURSE: ");
        logDebugMessage(globalStatus.course);
        logDebugMessage("\nset waypoint:\n");
        logDebugMessage(globalStatus.waypointLatitude);
        logDebugMessage(",");
        logDebugMessage(globalStatus.waypointLongitude);

        logDebugMessage("\n\nCOMPUTE COURSE TO!");
        logDebugMessage("\nDESIRED BEARING: ");
        logDebugMessage(globalStatus.desiredBearing);
        logDebugMessage("\nDISTANCE TO WAYPOINT: ");
        logDebugMessage(globalStatus.distanceToWaypoint);
        logDebugMessage("\n");
    } else if (command[0] == 'B') {
        int desiredBearing = 0;
        sscanf(&(command[1]), "%d", &desiredBearing);
        logDebugMessage("DESIRED BEARING: ");
        logDebugMessage(desiredBearing);
        logDebugMessage("\n");

        helmControl->setBearingAndEnablePID(desiredBearing, &globalStatus);

    } else if (command[0] == 'N') {
        logDebugMessage("ENABLE PID CONTROL OF RUDDER AND NAVIGATE TO WAYPOINT\n");
        helmControl->setBearingAndEnablePID(globalStatus.desiredBearing, &globalStatus);

    } else if (command[0] == 'M') {
        logDebugMessage("DISABLE PID CONTROL OF RUDDER\n");
        helmControl->disablePID(&globalStatus);

    } else if (command[0] == 'Q') {
        logDebugMessage("IRIDIUM SIGNAL QUALITY: ");
        commsManager->pollIridiumSignalQuality(&globalStatus);
        logDebugMessage(globalStatus.iridiumSignalQuality);
        logDebugMessage("\n");
    } else if (command[0] == 'X') {
        logDebugMessage("SEND STATUS THROUGH IRIDIUM. SIGNAL QUALITY: ");
        logDebugMessage(globalStatus.iridiumSignalQuality);
        logDebugMessage("\n");
        //commsManager->sendIridiumStatusMessage(&globalStatus);
    } else if (command[0] == 'P') {
        logDebugMessage("PUT THE IRIDIUM TO SLEEP\n");
        commsManager->sleepIridium(&globalStatus);
    } else if (command[0] == 'K') {
        logDebugMessage("START IRIDIUM\n");
        commsManager->wakeIridium(&globalStatus);
    }
}



void pollAndProcessSatteliteCommands(SailFaceStatus *status) {
    SailFaceCommandMessage satCommand;
    logDebugMessage("Polling for sat messages!\n");
    int numMessages = commsManager->pollForIridumCommandMessages(status, &satCommand, false);
    if (numMessages > 0) {
        logDebugMessage("AT LEAST ONE SAT MESSAGE RECEIVED!");
        if (satCommand.waypointLatitude > 0 || satCommand.waypointLongitude > 0) {
            navigation->setWaypoint(
                satCommand.waypointLatitude,
                satCommand.waypointLongitude,
                status);
        }

        if (satCommand.propSpeed >= 0) {
            propControl->setPropellerSpeed(satCommand.propSpeed, status);
        }

        //commsManager->toggleBluetooth(command.bluetoothActive);

        //if (commsManager->iridiumUpdateFrequencySeconds > 0) {
        //  commsManager->setIridiumStatusUpdateFreq(iridiumUpdateFrequencySeconds);
        //}

    }
}
